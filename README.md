# Convex Todo Application

A clean, minimal todo list application with AI-powered assistance, built on Convex backend with Better Auth for secure user authentication.

## 🎯 Project Description

A simple yet powerful todo list where users can create, complete, and delete tasks. Each user has their own private todo list accessible after authentication. The application features:

- ✅ **Core Todo Functionality** - Create, complete, and delete tasks
- 🔐 **User Authentication** - Secure email/password login with Better Auth
- 🤖 **AI Assistant** - Get help managing tasks with AI-powered suggestions
- ⏰ **Scheduled Tasks** - Set up recurring tasks with cron expressions
- 🎨 **Clean UI** - Minimal design focused on productivity
- 🚀 **Real-time Sync** - Instant updates across all your devices

## 🏗️ Architecture

This project follows the **Four-Layer Convex Pattern** for clean, maintainable code:

```
convex/
├── db/              # Database layer - pure CRUD operations
├── endpoints/       # Endpoint layer - business logic & validation
├── workflows/       # Workflow layer - external service integrations
└── helpers/         # Helper layer - utility functions
```

### Key Principles:
- **User-scoped**: All operations require authentication and are isolated per user
- **Type-safe**: Full TypeScript support with Convex validators
- **Reactive**: Real-time updates using Convex's reactive queries
- **Durable**: Workflows handle retries and error recovery automatically

## 🔧 Detected Components

This project uses the following Convex Components:

### Core Components (Always Required)
- **Better Auth** (`@convex-dev/better-auth`) - Secure authentication with sessions
- **Rate Limiter** (`@convex-dev/rate-limiter`) - Protect endpoints from abuse

### Feature Components
- **Agent** (`@convex-dev/agent`) - AI assistant for task management and suggestions
- **Crons** (`@convex-dev/crons`) - Scheduled tasks and recurring todos

## 📋 Prerequisites

Before you begin, ensure you have:

- **Node.js** v18 or higher
- **pnpm** package manager (recommended) or npm
- **Convex CLI** - Install with: `npm install -g convex`
- **AI Provider API Key** - OpenAI or Anthropic (for AI assistant features)

## 🚀 Installation

### 1. Install Dependencies

```bash
pnpm install
# or
npm install
```

### 2. Set Up Convex

Initialize your Convex deployment:

```bash
npx convex dev
```

This will:
- Create a new Convex deployment
- Generate your `CONVEX_DEPLOYMENT` and `NEXT_PUBLIC_CONVEX_URL`
- Set up the database schema
- Install required Convex Components

### 3. Configure Environment Variables

Copy the example environment file:

```bash
cp .env.local.example .env.local
```

Then fill in the required values:

```bash
# Convex (auto-generated by `convex dev`)
CONVEX_DEPLOYMENT=dev:your-deployment-name
NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud

# Better Auth
BETTER_AUTH_SECRET=<generate with: openssl rand -base64 32>
SITE_URL=http://localhost:3000
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# AI Provider (choose one)
OPENAI_API_KEY=sk-...
# OR
# ANTHROPIC_API_KEY=sk-ant-...
```

### 4. Start Development Servers

Run both Convex and Next.js in development mode:

```bash
pnpm dev
# or
npm run dev
```

This runs:
- **Convex**: Watches for backend changes and syncs with cloud
- **Next.js**: Serves the frontend at http://localhost:3000

Or run them separately:

```bash
# Terminal 1 - Convex backend
pnpm convex:dev

# Terminal 2 - Next.js frontend
pnpm web:dev
```

## 🔑 Component-Specific Setup

### Better Auth Configuration

Better Auth is automatically configured with:
- Email/password authentication
- 30-day JWT sessions
- Convex adapter for seamless integration

No additional setup required! Just start using the login/signup forms.

### Rate Limiter Configuration

Rate limits are pre-configured to prevent abuse:
- **Task Creation**: 10 per minute (burst of 3)
- **Task Updates**: 50 per minute
- **Task Deletion**: 30 per minute

Adjust in `convex/rateLimiter.ts` as needed.

### Agent (AI Assistant) Configuration

The AI agent uses your configured provider (OpenAI or Anthropic). It can:
- Suggest tasks based on your goals
- Help organize your task list
- Provide productivity tips
- Parse natural language into structured tasks

### Crons (Scheduled Tasks) Configuration

Cron jobs handle:
- Creating recurring tasks based on your schedule
- Sending overdue task reminders
- Cleaning up completed tasks (if enabled)

## 📁 Project Structure

```
convex-todo-app/
├── apps/
│   └── web/                 # Next.js frontend application
│       ├── app/            # App Router pages
│       ├── components/     # React components
│       └── lib/            # Client utilities
├── packages/               # Shared packages (if needed)
├── convex/                 # Convex backend
│   ├── schema.ts          # Database schema
│   ├── convex.config.ts   # Component configuration
│   ├── auth.ts            # Better Auth setup
│   ├── http.ts            # HTTP routes
│   ├── db/                # Database layer (Phase 2)
│   ├── endpoints/         # API endpoints (Phase 2)
│   └── helpers/           # Utilities (Phase 2)
└── planning/              # Design system & theme
```

## 🎨 Design System

The app uses a custom design system based on:
- **ReUI** + **shadcn/ui** components
- **Tailwind CSS** for styling
- **Radix UI** primitives for accessibility
- **Lucide Icons** for consistent iconography

Theme configuration: `/planning/theme.json`

### Design Tokens:
- **Primary**: #6366f1 (Indigo)
- **Secondary**: #0ea5e9 (Sky Blue)
- **Accent**: #f97316 (Orange)
- **Background**: #f8fafc (Neutral)
- **Font**: Inter Variable

## 🧪 Testing

```bash
# Run tests
pnpm test

# Run tests in watch mode
pnpm test:watch
```

## 🚢 Building for Production

```bash
# Build Next.js application
pnpm build

# Deploy to production
npx convex deploy
```

## 📚 Next Steps

Now that infrastructure is set up, you're ready for **Phase 2: Implementation**:

1. **Database Layer** - Implement CRUD operations in `convex/db/`
2. **Endpoints** - Create business logic in `convex/endpoints/`
3. **Frontend** - Build UI components in `apps/web/`
4. **AI Integration** - Connect agent for intelligent task management
5. **Cron Jobs** - Set up scheduled task creation

## 🔗 Resources

- [Convex Documentation](https://docs.convex.dev)
- [Better Auth Docs](https://better-auth.com)
- [Next.js 15 Docs](https://nextjs.org/docs)
- [Tailwind CSS](https://tailwindcss.com/docs)
- [Radix UI](https://www.radix-ui.com)

## 📄 License

MIT

## 🤝 Contributing

Contributions welcome! Please open an issue or submit a pull request.

---

Built with ❤️ using Convex, Better Auth, and Next.js
